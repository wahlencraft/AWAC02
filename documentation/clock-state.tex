\begin{tikzpicture}[every node/.style={scale=0.7}]

\node (CLOCK_MODE_SHOW) [state] { \texttt{clock\_mode\_show}};
\node (USER_ALARM_MODE) [state, left=4em of CLOCK_MODE_SHOW] {\texttt{user\_alarm\_mode}};
\node (ENTER_CLOCK_MODE) [start, above=of CLOCK_MODE_SHOW] {\texttt{enter\_clock\_mode}};
\node (CLOCK_MODE_INCREMENT) [state, right=of CLOCK_MODE_SHOW] {\texttt{clock\_mode\_increment}};
\node (HANDLE_IRQ) [state, below=of USER_ALARM_MODE] {\texttt{clock\_mode\_handle\_irq}};
\node (ENTER_MENU_MODE) [start, right=of CLOCK_MODE_INCREMENT] {\texttt{enter\_menu\_mode}};


\draw [arrow] (ENTER_CLOCK_MODE) -- (CLOCK_MODE_SHOW);

%\draw [arrow] (CLOCK_MODE_CHECK_INTERRUPTS) -| node[anchor=north]{RTC}
%    (CLOCK_MODE_SHOW);
%\draw [arrow] (CLOCK_MODE_CHECK_INTERRUPTS) -| node[anchor=north]{Button SP} (CLOCK_MODE_INCREMENT);
%\draw [arrow] (CLOCK_MODE_CHECK_INTERRUPTS) -| node[anchor=north]{Button R} (ENTER_MENU_MODE);

\draw [arrow] (CLOCK_MODE_SHOW) -- node [midway, above] {alarm?} (USER_ALARM_MODE);
\draw [arrow] (CLOCK_MODE_SHOW) -- (HANDLE_IRQ);
\draw [arrow] (CLOCK_MODE_INCREMENT) -- (CLOCK_MODE_SHOW);

\draw [arrow] (USER_ALARM_MODE) -- (HANDLE_IRQ);

\draw [arrow] (HANDLE_IRQ.east) to [bend right=30]
node[anchor=north west, pos=0.8] {RTC} (CLOCK_MODE_SHOW);

\draw [arrow] (HANDLE_IRQ.east) to [bend right=15]
node[anchor=north west, pos=0.8] {Button SP} (CLOCK_MODE_INCREMENT);

\draw [arrow] (HANDLE_IRQ.east) to [bend right=15]
node[anchor=north west, pos=0.8] {Button R} (ENTER_MENU_MODE);

\end{tikzpicture}
